=>../index.gmi ๐ ะฒะตัะฝััััั ะบ ะฝะฐัะฐะปั...

# ะะฐะฑะพัะฐ ั ะฟัะพะณัะฐะผะผะฝัะผ RAID
ะกะผ. ัะฐะบ ะถะต 
=>2025.01.25_mdraid.gmi ะะฐัััะพะนะบะฐ LVM

ะ ัะฐะบ ะถะต  
=>https://habrahabr.ru/post/102387 ะณะพัััะตะต ะฟะพะดะบะปััะตะฝะธะต SATA-ะดะธัะบะพะฒ.

ะ ัะปััะฐะต, ะตัะปะธ ะฝะตะพะฑัะพะดะธะผะพ ะทะฐะณััะถะฐัั ัะธััะตะผั ั ะบะพัะฝะตะผ ะฝะฐ 
=>http://ru.wikipedia.org/wiki/RAID#RAID_1 RAID1


###  ะกะพะทะดะฐัะผ ัะฐะทะดะตะป
ะะฐะถะฝะพ: ะฟัะธ ัะพะทะดะฐะฝะธะธ ัะตะนะดะฐ ะฝะฐ ัะฐะทะดะตะปะต ะฝัะถะฝะพ ะฟะพะผะฝะธัั, ััะพ mdraid ััะฐะฝะธั ัะฒะพั ะผะตัะฐ-ะธะฝัะพัะผะฐัะธั ะฒะบะพะฝัะต ะฑะปะพัะฝะพะณะพ ััััะพะนััะฒะฐ, ะฝะฐ ะบะพัะพัะพะผ ะพะฝ ัะพะทะดะฐัััั. ะ ัะตะทัะปััะฐัะต ะฟะพัะปะตะดะฝะธะน ัะฐะทะดะตะป ะฝะฐ ะดะธัะบะต ะดะพะปะถะตะฝ ะทะฐะบะฐะฝัะธะฒะฐัััั ะฝะฐ ะผะตะณะฐะฑะฐะนั ัะฐะฝััะต, ัะตะผ ะทะฐะบะฐะฝัะธะฒะฐะตััั ัะฐะผ ะดะธัะบ - ะธะฝะฐัะต mdadm ะผะพะถะตั ัะฟััะฐัั ัะตะนะด ะฝะฐ ะฟะพัะปะตะดะฝะตะผ ัะฐะทะดะตะปะต ะธ ัะตะนะด ะฝะฐ ะฒััะผ ะดะธัะบะต. ะ ะดะฐะถะต ะตัะปะธ ะฝะฐ ะฒััะผ ะดะธัะบะต ะฝะตั ัะตะนะดะฐ, ะฐ ัะตะนะด ัะพะปัะบะพ ะฝะฐ ะฟะพัะปะตะดะฝะตะผ ัะฐะทะดะตะปะต - ะฑัะดะตั ะฟััะฐะฝะธัะฐ.


ะะซะะะ: ะะพะฝะตั ะฟะพัะปะตะดะฝะตะณะพ ัะฐะทะดะตะปะฐ ะดะพะปะถะตะฝ ะพััััะฟะฐัั ะพั ะบะพะฝัะฐ ะดะธัะบะฐ ะฝะฐ ะฝะต ะผะตะฝะตะต ัะตะผ ะฝะฐ 100 ะบะ - ะปัััะต 1 ะะฑ



ะกะพะทะดะฐัะผ ัะฐะทะดะตะป ะฝะฐ ะดะธัะบะต ัะฐะทะผะตัะพะผ ัะพะฒะฝะพ 730 ะะฑ (730*1024=747520 ะะฑ) ะดะปั ัะพะณะพ, ััะพะฑั ะฟะพัะพะผ ะฝะต ะทะฐะฒะธัะธัั ะพั ัะฐะทะผะตัะฐ ะฒะธะฝัะฐ (ะฒ ัะปััะฐะต, ะตัะปะธ ะฑั ัะพะดะฐะปะธ ะผะฐะบัะธะผะฐะปัะฝะพ ะฑะพะปััะพะน ัะฐะทะดะตะป ะดะปั ะฝะฐัะตะณะพ ะฒะธะฝัะฐ):
```
fdisk /dev/sdc
```

ะะพะปะตะต ัะพะณะพ, ัะฐะทะดะตะป, ะพัะดะฐะฒะฐะตะผัะน ะฟะพะด ัะตะนะด ะฝะตะพะฑัะพะดะธะผะพ ะดะตะปะฐัั ะฝะต ะดะพ ะบะพะฝัะฐ ะดะธัะบะฐ, ะฐ ั ะพััััะฟะพะผ ะพั ะบะพะฝัะฐ ะดะธัะบะฐ ะฝะฐ ะฝะต ะผะตะฝะตะต 128 ะะฑ. ะญัะพ ะฝะตะพะฑัะพะดะธะผะพ ะฟะพัะพะผั, ััะพ ััะฟะตัะฑะปะพะบ ัะตะนะดะฐ ัะพะทะดะฐัััั ะฒ ะบะพะฝัะต ัะฐะทะดะตะปะฐ ะธะปะธ ะฒ ะบะพะฝัะต ะดะธัะบะฐ, ะตัะปะธ ะฟะพะด ัะตะนะด ะพัะดะฐัััั ะฒะตัั ะดะธัะบ. ะะพ ั.ะบ. ะบะพะฝะตั ะฒัะตะณะพ ะดะธัะบะฐ ัะฒะปัะตััั ะธ ะบะพะฝัะพะผ ะถะต ะฟะพัะปะตะดะฝะตะณะพ ัะฐะทะดะตะปะฐ ะฝะฐ ััะพะผ ะดะธัะบะต, ัะพ ััะฟะตัะฑะปะพะบ ัะตะนะดะฐ ะธะท ะฟะพัะปะตะดะฝะธั ัะฐะทะดะตะปะพะฒ ะฑัะดะตั ัะพะฒะฟะฐะดะฐัั ั ััะฟะตัะฑะปะพะบะพะผ ัะตะนะดะฐ, ัะพะทะดะฐะฝะฝะพะณะพ ะฝะฐ ะฒััะผ ะดะธัะบะต. ะัะธ ะฐะฒัะพัะฑะพัะบะต ัะตะนะดะฐ ะฟัะธ ะทะฐะณััะทะบะต ัะธััะตะผั ะฒะพะทะฝะธะบะฝัั ะพัะธะฑะบะธ, ั.ะบ. ัะธััะตะผะฐ "ัะฒะธะดะธั" ะดะฒะฐ ะพะดะธะฝะฐะบะพะฒัั ัะตะนะดะฐ - ั ะพะดะธะฝะฐะบะพะฒัะผะธ ััะฟะตัะฑะปะพะบะฐะผะธ.

### ะะปะพะฝะธัะพะฒะฐะฝะธะต ัะฐะทะดะตะปะพะฒ
ะะปั ะบะพะฟะธัะพะฒะฐะฝะธั ะพะดะธะฝะฐะบะพะฒัั ัะฐะฑะปะธั ัะฐะทะดะตะปะพะฒ ั ะพะดะฝะพะณะพ ะดะธัะบะฐ ะฝะฐ ะดััะณะธะต, ะผะพะถะฝะพ ะฒัะฟะพะปะฝะธัั ะบะพะผะฐะฝะดั:
```
sfdisk -d /dev/sda | sfdisk /dev/sdb
```

ะะทััะพ ะฟะพ 
=>http://www.opennet.ru/base/sys/raid5_sync.txt.html ัััะปะบะต.

ะ ัะปััะฐะต ะฑะพะปััะธั ะดะธัะบะพะฒ ั GPT, ะฝัะถะฝะพ ะธัะฟะพะปัะทะพะฒะฐัั ััะธะปะธัั ะธะท ะฟะฐะบะตัะฐ **gdisk** (apt-get install gdisk):
```
  sgdisk -R=/dev/sdh /dev/sda
  sgdisk -G /dev/sdh
```
ะะดะต:
* /dev/sda - ะธััะพะดะฝัะน ะดะธัะบ ั ัะฐะฑะพัะตะน ัะฐะฑะปะธัะตะน GPT, ั ะบะพัะพัะพะณะพ ะบะพะฟะธััะตะผ GPT
* /dev/sdh - ะดะธัะบ-ะฟะพะปััะฐัะตะปั, ะฝะฐ ะบะพัะพััะน ะบะพะฟะธััะตะผ ัะฐะฑะปะธัั GPT
* sgdisk -G - ัะผะตะฝะฐ UID-ะพะฒ ัะฐะทะดะตะปะพะฒ ะฝะฐ ัะฝะธะบะฐะปัะฝัะต

### ะะธัะบะธ ะฑะพะปะตะต 2ะขะฑ
ะขะฐะฑะปะธัะฐ MBR ะธะผะตะตั ะพะณัะฐะฝะธัะตะฝะธะต ะฒ 2ะขะฑ ะฝะฐ ะดะธัะบ. ะะพััะพะผั, ะฒ ัะปััะฐะต, ะตัะปะธ ะธัะฟะพะปัะทัะตััั ะดะธัะบ ัะฐะทะผะตัะพะผ ะฑะพะปะตะต 2ะขะฑ - ะฝะตะพะฑัะพะดะธะผะพ ะธัะฟะพะปัะทะพะฒะฐัั ัะฐะฑะปะธัั ัะฐะทะดะตะปะพะฒ 
=>http://www.gentoo.org/doc/en/handbook/handbook-ia64.xml?style=printable&part=1&chap=4 GPT.
###  ะัะธัะฐะตะผ ัะฐะฝะตะต ัะพะทะดะฐะฝะฝัะน raid-ััะฟะตัะฑะปะพะบ
ะัะปะธ ะฝะฐัะพะทะดะฐะฒะฐัั ะผะฝะพะถะตััะฒะพ ัะตะนะดะพะฒ (ะฒ ะฟัะพัะตััะต ัะบัะฟะตัะธะผะตะฝัะธัะพะฒะฐะฝะธั), ัะพ ะฟัะธ ะฐะฒัะพะผะฐัะธัะตัะบะพะน ัะฑะพัะบะต ัะตะนะดะฐ (ะฝะฐ ััะฐะฟะต ะทะฐะณััะทะบะธ) ัะตะนะด ะผะพะถะตั ะฑััั ัะพะฑัะฐะฝ ะฝะตะฟัะฐะฒะธะปัะฝะพ - ะธะท ะฝะพะฒัั ะธ ะธะท "ััะฐััั" ัะฐะทะดะตะปะพะฒ. ะงัะพะฑั ะธัะบะปััะธัั ะดะฐะฝะฝัะน ะฒะฐัะธะฐะฝั ัะฐะทะฒะธัะธั ัะพะฑััะธะน ะฝะตะพะฑัะพะดะธะผะพ ะพัะธัะฐัั ััะฟะตัะฑะปะพะบ ัะตะนะดะฐ ะฝะฐ ัะพะพัะฒะตัััะฒัััะตะผ ะฑะปะพัะฝะพะผ ััััะพะนััะฒะต, ะตัะปะธ ะพะฝ ะฝะต ะฝัะถะตะฝ:
```
mdadm --zero-superblock /dev/sda
```

ะะพะพะฑัะต, ัะพััะฒะฐัะฝัะน ัะตะนะด ะดะพะฒะพะปัะฝะพ ะถะธะฒัั, ะธ ะดะฐะถะต ะตัะปะธ ะทะฐัะตัะตัั ััะฟะตัะฑะปะพะบ ะฒััะตะพะฟะธัะฐะฝะฝะพะน ะบะพะผะฐะฝะดะพะน, ะทะฐัะตัะตัั ะฝะฐัะฐะปะพ ะดะธัะบะฐ ั ะฟะพะผะพััั dd, ะฟะตัะตัะพะทะดะฐัั ัะฐะฑะปะธัั ัะฐะทะดะตะปะพะฒ - ะฒัั ัะฐะฒะฝะพ mdadm ะฑัะดะตั ะฝะฐัะพะดะธัั ััะฐััะน ัะตะนะด.

ะขะตััะธัะพะฒะฐะฝะธะต ะพะฑะฝะฐััะถะตะฝะธั ัะตะนะดะฐ ะฝะฐ ะฑะปะพัะฝะพะผ ััััะพะนััะฒะต ะฒัะฟะพะปะฝัะตััั ะบะพะผะฐะฝะดะพะน:
```
mdadm --examine /dev/sda
```

ะ ะฒัั ะถะต, ััะพะฑั ะธะทะฑะฐะฒะธัััั ะพั ััะฐัะพะณะพ ัะตะนะดะฐ, ะฝัะถะฝะพ ะฟะตัะตัะพะทะดะฐัั ัะฐะฑะปะธัั ัะฐะทะดะตะปะพะฒ, ะฝะพ ัะพะทะดะฐัั ะตั ะธะฝัั, ััะพะฑั ัะฐะทะดะตะปั ะฝะฐัะธะฝะฐะปะธัั ะฟะพ ะดััะณะธะผ ะฑะปะพะบะฐะผ. ะะฐะฟัะธะผะตั ัะพะทะดะฐัั ะฟะตัะฒัะน ัะฐะทะดะตะป ะฝะฐ 10 ะะฑ ะฑะพะปััะต ะธะปะธ ะผะตะฝััะต.

ะะพัะปะต ััะพะณะพ ะฟัะพะฒะตัะธัั, ะฝะฐัะพะดัััั ะปะธ ัะตะนะดั ะฒััะตัะบะฐะทะฐะฝะฝะพะน ะบะพะผะฐะฝะดะพะน.

###  ะกะพะทะดะฐัะผ RAID

### ะกะพะทะดะฐะตะผ RAID1 ะธะท ััะธั ัะฐะทะดะตะปะพะฒ:

```
mdadm --create /dev/md1 --metadata=0.90 --verbose -l 1 -n 2 /dev/sdc1 /dev/sdd1
```

ะะดะต:
* -l 1 - ััะพะฒะตะฝั ััะนะดะฐ (ะฟะตัะฒัะน)
* -a - ะฐะฒัะพะผะฐัะธัะตัะบะธ ัะพะทะดะฐัั ััััะพะนััะฒะพ ััะนะดะฐ
* -n 2 - ะฒัะตะณะพ ะฒ ััะนะดะต ะฑัะดะตั 2 ััััะพะนััะฒะฐ (ะฝัะถะฝะพ ัะบะฐะทัะฒะฐัั ะบะพะฝะตัะฝะพะต ะบะพะปะธัะตััะฒะพ ััััะพะนััะฒ, ะดะฐะถะต ะตัะปะธ ัะตะนัะฐั ะทะฐะดะตะนััะฒัะตะผ ัะพะปัะบะพ ะพะดะฝะพ ััััะพะนััะฒะพ)
*  --metadata=0.90 - ะฒะตััะธั ัะตะนะดะฐ. ะะพ ัะผะพะปัะฐะฝะธั mdadm ัะพะทะดะฐัั ะฒะตััะธั 1.2, ะบะพัะพัะฐั ะฝะต ะพะฟัะตะดะตะปัะตััั ัะดัะพะผ linux (ัะฑะพัะบะฐ ัะตะนะดะฐ ะฒะพะทะผะพะถะฝะฐ ัะพะปัะบะพ ััะตะดััะฒะฐะผะธ mdadm ะฟะพัะปะต ะทะฐะณััะทะบะธ ัะธััะตะผั ะธะปะธ ั initrd-ะพะฑัะฐะทะฐ).

ะัะปะธ ะถะต ะฝะฐ ะดะฐะฝะฝัะน ะผะพะผะตะฝั ะฟัะธัััััะฒัะตั ัะพะปัะบะพ ะพะดะธะฝ ะดะธัะบ, ัะพ ะฒะทะฐะผะตะฝ ะฒัะพัะพะณะพ ะฝัะถะฝะพ ะฟะพััะฐะฒะธัั ะบะปััะตะฒะพะต ัะปะพะฒะพ missing:

```
mdadm --create /dev/md1 --metadata=0.90 --verbose -l 1 -n 2 /dev/sdc1 missing
```

ะะพะทะถะต, ะบะพะณะดะฐ ะฟะพัะฒะธััั ะฒัะพัะพะน ะดะธัะบ, ะดะพะฑะฐะฒะธัั ะตะณะพ ะฒ RAID ะผะพะถะฝะพ ะบะพะผะฐะฝะดะพะน:

```
mdadm --manage --add /dev/md1 /dev/sdd1
```
ะธะปะธ
```
mdadm -a /dev/md1 /dev/sdd1
```


### ะกะพะทะดะฐัะผ RAID5
ะะตะนะด ััะพะธั ัะพะทะดะฐะฒะฐัั ัะพะปัะบะพ ะฝะฐ ัะฐะทะดะตะปะฐั, ะฝะต ะฝะฐ ะฟะพะปะฝัั ะฒะธะฝัะฐั. 
ะะพะฟัััะธะผ ั ะฝะฐั ะตััั 6 ะดะธัะบะพะฒ, ะธะท ะบะพัะพััั 5 ะผั ัะพัะธะผ ะพัะดะฐัั ะฟะพะด RAID5, ะฐ 6-ะน - ะฒ ะณะพััััั ะทะฐะผะตะฝั.
```
mdadm --create /dev/md1 --metadata=0.90 --level=5 --raid-devices=5 /dev/sda3 /dev/sdb3 /dev/sdc3 /dev/sdd3 /dev/sde3 --spare-devices=1 /dev/sdf3
```
ะะดะต:
*  --metadata=0.90 - ะฒะตััะธั ัะตะนะดะฐ. ะะพ ัะผะพะปัะฐะฝะธั mdadm ัะพะทะดะฐัั ะฒะตััะธั 1.2, ะบะพัะพัะฐั ะฝะต ะพะฟัะตะดะตะปัะตััั ัะดัะพะผ linux, ัะพะพัะฒะตัััะฒะตะฝะฝะพ ะฐะฒัะพะพะฟัะตะดะตะปะตะฝะธะต ัะตะนะดะฐ ะฝะต ะฟัะพัะพะดะธั ะฝะฐ ััะฐะฟะต ะทะฐะณััะทะบะธ ัะธััะตะผั ะธ ะตัะปะธ ะฝะฐ ะดะฐะฝะฝะพะผ ัะฐะทะดะตะปะต ะฝะฐัะพะดะธััั ะบะพัะตะฝั - ัะธััะตะผะฐ ะฝะต ะทะฐะณััะทะธััั (ัะฑะพัะบะฐ ัะตะนะดะฐ ะฒะพะทะผะพะถะฝะฐ ัะพะปัะบะพ ััะตะดััะฒะฐะผะธ mdadm ะฟะพัะปะต ะทะฐะณััะทะบะธ ัะธััะตะผั ะธะปะธ ั initrd-ะพะฑัะฐะทะฐ).
ะะพะปััะฐะตะผ ะธะฝัะพัะผะฐัะธั ะพ ัะตะนะดะต:
```
mdadm --misc --detail /dev/md0
```

ะกะพััะฐะฝัะตะผ ะบะพะฝัะธะณััะฐัะธั:
```
mdadm --detail --scan >> /etc/mdadm.conf
```
ะบะพัะพัะบะฐั ัะพัะผะฐ ะบะพะผะผะฐะฝะดั
```
mdadm -D -s >> /etc/mdadm.conf
```



###  ะะพะปััะตะฝะธะต ะธะฝัะพัะผะฐัะธะธ ะพ ะฒะฝะพะฒั ัะพะทะดะฐะฝะฝะพะผ RAID

```
mdadm --detail /dev/md1
```
ะธะปะธ
```
mdadm -D /dev/md1
```
ะะพะถะฝะพ ัะพััะฐะฝะธัั ะตั ะดะปั ะฟะพัะพะผะบะพะฒ ะฒ:
```
mdadm --detail /dev/md1 > /etc/raidtab
```

###  ะะพะฟะธััะตะผ ะบะพะฝัะธะณััะฐัะธ RAID 
ะะตัะตะด ััะธะผ ะผะพะถะฝะพ ะฟะพัะผะพััะตัั ััะพ ัะฐะผ, ััะพะฑั ะทะฝะฐัั ััะพ ัะดะฐะปััั, ะตัะปะธ ัะถะต ัะฐะผ ะฑัะปะธ ะทะฐะฟะธัะธ, ั.ะบ. ะธะฝัะพัะผะฐัะธั ะฑัะดะตั ะฟะพ ะฒัะตะผ RAID-ััััะพะนััะฒะฐะผ ะฒ ัะธััะตะผะต:
```
mdadm --detail --scan >> /etc/mdadm.conf
```

###  ะกะฑะพัะบะฐ ัะถะต ัััะตััะฒัััะตะณะพ ัะตะนะดะฐ:
ะัะพะฑัะตะผ ะฐะฒัะพะผะฐัะธัะตัะบะธ ะทะฐะฟัััะธัั raid:
```
mdadm --assemble --scan
```
ะธะปะธ ะฑะพะปะตะต ะบะพัะพัะบะฐั ัะพัะผะฐ
```
mdadm -A -s
```
ะญัะฐ ะบะพะผะฐะฝะดะฐ ะทะฐะฟัััะธั ะตัั ะฝะต ะทะฐะฟััะตะฝะฝัะต ัะตะนะดั. ะะฐะถะต ะตัะปะธ ะตััั ะฒัะตะณะพ ะพะดะธะฝ ะดะธัะบ ะธะท ะดะฒัั.
###  raid0
ะะพะฑะฐะฒะปะตะฝะธะต ะดะธัะบะฐ ะฒ ะทะฐะฟััะตะฝะฝัะน raid:
```
mdadm --assemble /dev/md0 /dev/sda2 /dev/sdb2
```
###  raid5
```
mdadm --assemble /dev/md1 /dev/sda3 /dev/sdb3 /dev/sdc3 /dev/sdd3 /dev/sde3 /dev/sdf3
```

###  ะะพััะฐะฝะพะฒะปะตะฝะธะต ัะตะนะดะฐ
###  ะะฐะผะตะฝะฐ ัะฑะพะนะฝะพะณะพ ะดะธัะบะฐ ะฒ ัะตะนะดะต
ะะพะผะตัะฐะตะผ /dev/sdb1 ะบะฐะบ ัะฑะพะนะฝัะน:
```
mdadm --manage --fail /dev/md0 /dev/sdb1
```
ะธะปะธ ะบัะฐัะบะฐั ัะพัะผะฐ
```
mdadm -f /dev/md0 /dev/sdb1
```
ะัะปะธ ะฟัะพะฑะปะตะผะฐ ะฒ ะบะฐะฑะตะปะต ะฟะพะดะบะปััะตะฝะธั ะถะตััะบะพะณะพ ะดะธัะบะฐ ะธ ะพะฝะฐ ัะตัะตะฝะฐ, ัะพ ะฒะพะทัะฐั ะฒ ัะตะนะด ะพัััะตััะฒะปัะตััั
```
mdadm --re-add /dev/md0 /dev/sdb1
```
ะัะฒะพะดะธะผ ะตะณะพ ะธะท ัะตะนะดะฐ:
```
mdadm --manage --remove /dev/md0 /dev/sdb1
```
ะบัะฐัะบะฐั ัะพัะผะฐ
```
mdadm -r /dev/md0 /dev/sdb1
```
ะะฟัะตะดะตะปัะตะผ ะบะฐะบะพะน ะธะผะตะฝะฝะพ ะฒะธะฝั ะฝัะถะฝะพ ัะธะทะธัะตัะบะธ ะทะฐะผะตะฝััั:
```
ls -l /dev/disk/by-id/
```
ะัะตะผ ะฝะฐั sdb:
```
ls -l /dev/disk/by-id/|egrep sdb$
```
ะะพะปััะฐะตะผ:
```
lrwxrwxrwx 1 root root  9 ะะพั 13 12:19 ata-WDC_WD2002FAEX-007BA0_WD-WMAWP0467603 -> ../../sdb
lrwxrwxrwx 1 root root  9 ะะพั 13 12:19 scsi-SATA_WDC_WD2002FAEX-_WD-WMAWP0467603 -> ../../sdb
lrwxrwxrwx 1 root root  9 ะะพั 13 12:19 wwn-0x50014ee00369c323 -> ../../sdb
```
ะกะพะพัะฒะตัััะฒะตะฝะฝะพ, ัะฐะทะพะฑัะฐะฒ ัะตัะฒะตั, ะฝะฐะผ ะฝัะถะฝะพ ะฑัะดะตั ะทะฐะผะตะฝะธัั ะถัััะบะธะน ะดะธัะบ ะผะพะดะตะปะธ **WDC WD2002FAEX** ั ะธะดะตะฝัะธัะธะบะฐัะพัะพะผ **WMAWP0467603** (ะฝะฐ ะฝัะผ ะฑัะดะตั ะฝะฐะฟะธัะฐะฝะพ). ะัะปะธ ั ะฝะต ะฝะฐะฟััะฐะป :-)

ะะพัะปะต ััะพะณะพ ะฟะตัะตัะฐะทะฑะธะฒะฐะตะผ (ัะผ. ะฒััะต) ะฝะพะฒัะน ะฒะธะฝั (ะฒะพะทะผะพะถะฝะพ ั ะฝะตะณะพ ะฑัะดะตั ะธะฝะพะต ะธะผั - ะฝะต /dev/sdb1) ะธ ะฟะพะดะบะปััะฐะตะผ ะฒ ัะตะนะด:
```
mdadm --manage --add /dev/md0 /dev/sdb1
```
ะบะพัะพัะบะฐั ัะพัะผะฐ
```
mdadm -a /dev/md0 /dev/sdb1
```

###  ะฃะฒะตะปะธัะตะฝะธะต ัะบะพัะพััะธ ะฟะตัะตัะฑะพัะบะธ ัะตะนะดะฐ
ะฃััะฐะฝะพะฒะธะผ ะผะธะฝะธะผะฐะปัะฝัั
ัะบะพัะพััั ะฒ 50 ะะฑ/ัะตะบ, ะฐ ะผะฐะบัะธะผะฐะปัะฝัั ะฒ 300 ะะฑ/cะตะบ:

```
echo 50000 > /proc/sys/dev/raid/speed_limit_min
echo 300000 > /proc/sys/dev/raid/speed_limit_max
```

ะะพัะผะพััะตัั ัะตะบัััั ัะบะพัะพััั ัะตัะธะฝััะพะฝะธะทะฐัะธะธ ะผะพะถะฝะพ ะฒ ะฒัะฒะพะดะต ะบะพะผะฐะฝะดั:

```
cat /proc/mdstat
```

ะะทััะพ ะฟะพ 
=>http://www.opennet.ru/tips/2398_raid_speed_optimization_linux_mdadm.shtml ัััะปะบะต.


###  ะัะพัะผะพัั ััะฐัะธััะธะบะธ ะฟะพ ัััะตััะฒัััะธะผ RAID-ะฐะผ:
```
cat /proc/mdstat
```
ะฒ ัะตะฐะปัะฝะพะผ ะฒัะตะผะตะฝะธ, ะฒััะพะด CTRL+C
```
watch cat /proc/mdstat
```

## ะกะพะทะดะฐะฝะธะต ัะฐะนะปะพะฒะพะน ัะธััะตะผั
ะ ัะปััะฐะต ัะพะทะดะฐะฝะธั ext2/3/4:
```
mkfs.ext3 -b 4096 -E stride=128,stripe-width=384
```
ะะดะต:
* -b n - ะฑะฐะนั ะฒ ะบะปะฐััะตัะต
* -stride=n - ะทะฝะฐัะตะฝะธะต ะธะท `mdadm --misc --detail /dev/md0|grep "Chunk Size"` ะดะตะปัะฝะฝะพะต ะฝะฐ ะฑะฐะนั ะฒ ะบะปะฐััะตัะต. ะ ัะปััะฐะต Chunk Size = 512ะบ ะธ 4096 ะฑะฐะนั ะฒ ะบะปะฐััะตัะต - stride=128
* -stripe-width=n - stride * ะบะพะปะธัะตััะฒะพ ัะฐะฑะพัะฐััะธั ะดะธัะบะพะฒ. ะ ะฝะฐัะตะผ ัะปััะฐะต raid5 ั ะฟัััั ะดะธัะบะฐะผะธ - 128 (stride) ัะผะฝะพะถะฐะตะผ ะฝะฐ 4, ั.ะบ. ะพะดะธะฝ ะดะธัะบ ัะฐััะพะดัะตััั ะฝะฐ ะบะพะฝััะพะปัะฝัะต ััะผะผั (ะดะธัะบ ะณะพัััะตะน ะทะฐะผะตะฝั ะฒะพะพะฑัะต ะฝะต ััะธัะฐะตะผ, ั.ะบ. ะพะฝ ะฝะต ััะฐััะฒัะตั ะฒ ัะฐะฑะพัะต ัะตะนะดะฐ).

ะะพะถะฝะพ ะฟะพะฟัะพะฑะพะฒะฐัั 
=>http://busybox.net/~aldot/mkfs_stride.html ะบะฐะปัะบัะปััะพั.
## ะะพัััะตะต ะฟะพะดะบะปััะตะฝะธะต sata
ะะทััะพ 
=>https://habrahabr.ru/post/102387/ ััั.

ะะพัััะตะต ะพัะบะปััะตะฝะธะต:
```
echo 1 >/sys/block/sdX/device/delete
```
ะะพัััะตะต ะฟะพะดะบะปััะตะฝะธะต:
```
echo "- - -" >/sys/class/scsi_host/hostX/scan
```
##  ะกััะปะบะธ
=>http://xgu.ru/wiki/ะัะพะณัะฐะผะผะฝัะน_RAID_ะฒ_Linux]]
=>http://en.gentoo-wiki.com/wiki/Software_RAID_Install ะะฝััััะบัะธั ะฟะพ ัััะฐะฝะพะฒะบะต RAID ะฒ Gentoo-wiki
=>https://bbs.archlinux.org/viewtopic.php?id=88876]]
=>http://busybox.net/~aldot/mkfs_stride.html]]
=>http://habrahabr.ru/blogs/linux/111036/ ะะฟัะธะผะธะทะฐัะธั RAID6
=>https://habrahabr.ru/post/102387 ะะพัััะตะต ะฟะพะดะบะปััะตะฝะธะต SATA-ะดะธัะบะพะฒ.

=>../index.gmi ๐ ะฒะตัะฝััััั ะบ ะฝะฐัะฐะปั...
